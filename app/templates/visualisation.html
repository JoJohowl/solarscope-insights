{% extends 'base.html' %}

{% block title %}Visualisation | SolarAnalytics{% endblock %}

{% block content %}
<div class="visualisation-container p-6">
  <h2 class="text-3xl font-bold mb-6">Data Visualisation</h2>
  <p>Select datasets to visualise and compare solar exposure trends.</p>

  <!-- Dropdown menu for selecting the first dataset -->
  <div id="dropdown-container">
    <div class="dropdown-item">
      <label for="dataset-select-1" class="block text-lg font-medium mb-2">Choose a dataset:</label>
      <select id="dataset-select-1" class="border border-gray-300 rounded-md p-2 w-full">
        <option value="" disabled selected>Select a city</option>
        {% for file in uploaded_files %}
        <option value="{{ file.id }}">{{ file.city }}</option>
        {% endfor %}
      </select>
    </div>
  </div>

  <!-- Checkbox to add another city -->
  <div class="mt-4">
    <input type="checkbox" id="add-city-checkbox" class="mr-2">
    <label for="add-city-checkbox" class="text-lg font-medium">Add another city</label>
  </div>

  <!-- Button for visualizing datasets -->
  <button id="visualize-datasets" class="mt-4 bg-blue-500 text-white px-4 py-2 rounded-md">Visualise</button>

  <!-- Chart container -->
  <div class="mt-8">
    <canvas id="solarChart" width="800" height="400"></canvas>
  </div>
</div>
<!-- Add export buttons below the chart -->
<div class="mt-4 flex space-x-4">
  <button id="export-pdf" class="bg-green-500 text-white px-4 py-2 rounded-md">Export as PDF</button>
  <button id="export-image" class="bg-blue-500 text-white px-4 py-2 rounded-md">Export as PNG/JPG</button>
</div>
<!-- Include Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.9/dist/chart.umd.min.js"></script>

<script src="{{ url_for('static', filename='js/script.js') }}"></script>
{% endblock %}